{{- if .Values.ExternalSecrets.enabled }}
  {{- range .Values.ExternalSecrets.secrets }}
  {{if eq .external true}}
apiVersion: external-secrets.io/v1alpha1 
kind: ExternalSecret
metadata:
  name: {{ .name}}
spec:
  {{- if .refreshinterval }}
  refreshInterval: {{ .refreshinterval}}
  {{- end}}
  secretStoreRef:
    name: {{ .secretstorename}}
    kind: SecretStore
  target:
    name: {{ .name}}
  data:
  {{- range .secretData }}
  - secretKey: {{ .key }}
    remoteRef:
        key: {{.awssmsecretname}}
        property: {{.keysm}} 
{{- end}}
{{- end}}
{{- end}}
{{- end}}
