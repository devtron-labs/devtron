name: Validate Pull Request

on:
  pull_request_target:
    types: [opened, synchronize, edited]
    branches:    
      - 'main'
      - 'release-**'
      - 'develop'
      - 'hotfix-**'
      - 'fix/pr-validator'
    # paths-ignore:
    #   - 'docs/**'
    #   - '.github/'
    #   - 'CHANGELOG/'
    #   - 'charts/'
    #   - 'manifests/'
    #   - 'sample-docker-templates/'
  
jobs:
  pr-validation:
    uses: devtron-labs/utilities/.github/workflows/pr-validator.yaml@feat/central-pr-validator
    secrets: inherit
    with:
      validate_sql: true  # Enable/disable SQL validation
    permissions:
      issues: write  # Ensure you have the right permissions for labels and PR management
      pull-requests: write  # This ensures you can modify pull request labels
