openapi: 3.0.3
info:
  title: Application Workflow Cloning
  description: API for cloning application workflows
  version: 1.0.0

paths:
  /orchestrator/app/workflow/clone:
    post:
      description: Clones an application workflow from a source environment to a target environment
      operationId: CloneApplicationWorkflow
      requestBody:
        description: A JSON object containing the details required to clone the workflow
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CloneApplicationWorkflowRequest'
      responses:
        '200':
          description: Cloning operation response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'

components:
  schemas:
    CloneApplicationWorkflowRequest:
      type: object
      properties:
        appId:
          type: integer
          description: ID of the application
        appName:
          type: string
          description: Name of the application
        sourceEnvironmentId:
          type: integer
          description: ID of the source environment
        sourceEnvironmentName:
          type: string
          description: Name of the source environment
        targetEnvironmentId:
          type: integer
          description: ID of the target environment
        targetEnvironmentName:
          type: string
          description: Name of the target environment
        cloneEnvInSameWorkflow:
          type: boolean
          description: Flag indicating if the environment should be cloned in the same workflow

    CloneApplicationWorkflowResponse:
      type: object
      properties:
        status:
          type: string
          description: Status of the operation
          enum:
            - SUCCESS
            - FAILED
            - SKIPPED
        message:
          type: string
          description: Detailed message about the operation result
      required:
        - status
        - message

    StandardResponse:
      type: object
      properties:
        code:
          type: integer
          description: HTTP status code
          example: 200
        status:
          type: string
          description: HTTP status text
          example: OK
        result:
          type: object
          properties:
            status:
              type: string
              description: Status of the operation
              enum:
                - SUCCESS
                - FAILED
                - SKIPPED
            message:
              type: string
              description: Detailed message about the operation result
          required:
            - status
            - message
      required:
        - code
        - status
        - result
